<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <title>AeronBeat</title>

  <!-- CSS t·ª´ Google Sheet export -->
  <link rel="stylesheet" href="resources/sheet.css" />

  <style type="text/css">
    .ritz .waffle a { color: inherit; }
    .ritz .waffle .s1 {
      background-color:#ffffff;
      text-align:left;
      color:#1a1c1e;
      font-family:docs-Inter,Arial;
      font-size:11pt;
      vertical-align:bottom;
      white-space:nowrap;
      direction:ltr;
      padding:2px 3px;
    }
    .ritz .waffle .s3 {
      background-color:#ffffff;
      text-align:right;
      color:#1a1c1e;
      font-family:docs-Inter,Arial;
      font-size:11pt;
      vertical-align:bottom;
      white-space:nowrap;
      direction:ltr;
      padding:2px 3px;
    }
    .ritz .waffle .s0 {
      background-color:#ffffff;
      text-align:left;
      font-weight:bold;
      color:#1a1c1e;
      font-family:docs-Inter,Arial;
      font-size:11pt;
      vertical-align:bottom;
      white-space:nowrap;
      direction:ltr;
      padding:2px 3px;
    }
    .ritz .waffle .s2 {
      background-color:#ffffff;
      text-align:left;
      text-decoration:underline;
      color:#1155cc;
      font-family:docs-Inter,Arial;
      font-size:11pt;
      vertical-align:bottom;
      white-space:nowrap;
      direction:ltr;
      padding:2px 3px;
    }

    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    h1 {
      margin-bottom: 10px;
    }

    hr {
      margin: 30px 0;
    }
  </style>
</head>

<body>

<h1>üéµ AeronBeat ‚Äì Music Library</h1>

<p>
  ƒê√¢y l√† d·ªØ li·ªáu g·ªëc t·ª´ Google Sheet (export).  
  B√™n d∆∞·ªõi s·∫Ω l√† d·ªØ li·ªáu ƒë·ªông t·ª´ Firestore (s·∫Øp g·∫Øn).
</p>

<hr />

<!-- ===== GOOGLE SHEET EXPORT (GI·ªÆ NGUY√äN) ===== -->
<div class="ritz grid-container" dir="ltr">
  <table class="waffle" cellspacing="0" cellpadding="0">
    <thead>
      <tr>
        <th></th>
        <th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th><th>G</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><b>ID</b></td>
        <td><b>Title</b></td>
        <td><b>Artist</b></td>
        <td><b>URL</b></td>
        <td><b>Cover</b></td>
        <td><b>BaseBPM</b></td>
        <td><b>Category</b></td>
      </tr>
      <tr>
        <td>t1</td>
        <td>Aerobic Mix 01</td>
        <td>DJ Aero</td>
        <td><a href="https://link-to-audio.mp3" target="_blank">Audio</a></td>
        <td><a href="https://link-to-img.jpg" target="_blank">Cover</a></td>
        <td>140</td>
        <td>Aerobic</td>
      </tr>
      <tr>
        <td>t2</td>
        <td>Chill Down</td>
        <td>Relax Music</td>
        <td><a href="https://link-to-audio.mp3" target="_blank">Audio</a></td>
        <td><a href="https://link-to-img.jpg" target="_blank">Cover</a></td>
        <td>90</td>
        <td>Th∆∞ Gi√£n</td>
      </tr>
    </tbody>
  </table>
</div>

<hr />

<!-- ===== KHU V·ª∞C APP D·ªÆ LI·ªÜU ƒê·ªòNG ===== -->
<h2>üî• Tracks (t·ª´ Firestore)</h2>
<div id="tracks">
  <i>ƒêang t·∫£i d·ªØ li·ªáu‚Ä¶</i>
</div>


<script type="module">
  import { initializeApp } from
    "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, getDocs } from
    "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBwJ5t7xZq4WJ1DWHtSH-cMACL8AyxTmGc",
    authDomain: "aerobeat.firebaseapp.com",
    projectId: "aerobeat",
    storageBucket: "aerobeat.firebasestorage.app",
    messagingSenderId: "478034577378",
    appId: "1:478034577378:web:6e91e105255b26d370dbbb"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const container = document.getElementById("tracks");
  container.innerHTML = "";

  try {
    const snap = await getDocs(collection(db, "tracks"));

  snap.forEach(doc => {
  const d = doc.data();

  // b·ªè qua document thi·∫øu d·ªØ li·ªáu
  if (!d.Title || !d.URL) return;

  const div = document.createElement("div");
  div.style.border = "1px solid #ddd";
  div.style.padding = "12px";
  div.style.marginBottom = "12px";
  div.style.maxWidth = "400px";
  div.style.borderRadius = "12px";

  div.innerHTML = `
    <img src="${d.Cover || ""}" 
         style="width:100%;border-radius:8px;margin-bottom:8px"
         onerror="this.style.display='none'" />

    <h3 style="margin:4px 0">${d.Title}</h3>
    <div>${d.Artist || ""} ‚Ä¢ ${d.BaseBPM || "?"} BPM</div>

    <audio controls style="width:100%;margin-top:6px">
      <source src="${d.URL}" type="audio/mpeg">
    </audio>
  `;

  container.appendChild(div);
});


    if (snap.empty) {
      container.innerHTML = "<i>Kh√¥ng c√≥ d·ªØ li·ªáu tracks</i>";
    }
  } catch (err) {
    console.error(err);
    container.innerHTML = "<b>L·ªói khi t·∫£i d·ªØ li·ªáu Firestore</b>";
  }
</script>


</body>
</html>
